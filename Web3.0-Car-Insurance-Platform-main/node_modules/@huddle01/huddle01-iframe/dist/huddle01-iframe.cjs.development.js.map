{"version":3,"file":"huddle01-iframe.cjs.development.js","sources":["../src/HuddleIframe.tsx","../src/iframeApi.ts"],"sourcesContent":["import React from 'react';\n\nexport interface IframeConfig {\n  roomUrl: string;\n  noBorder?: boolean;\n  height?: string;\n  width?: string;\n}\n\nexport interface Props {\n  config: IframeConfig;\n}\n\nexport const HuddleIframe: React.FC<Props> = ({ config }) => {\n  const { noBorder, roomUrl, height, width } = config;\n\n  return (\n    <iframe\n      id=\"huddle01-iframe\"\n      src={roomUrl}\n      style={{ border: noBorder ? 'none' : '3px #333dde solid' }}\n      name=\"myiFrame\"\n      scrolling=\"no\"\n      height={height || '90%'}\n      width={width || '90%'}\n      allowFullScreen\n      allow=\"camera; microphone; clipboard-read; clipboard-write; display-capture\"\n    ></iframe>\n  );\n};\n","type IframeEventCallback = (data: any) => void;\n\nexport enum HuddleAppEvent {\n  AVATAR_URL_CHANGED = 'avatar-url-changed',\n  PEER_JOIN = 'peer-join',\n  PEER_LEFT = 'peer-left',\n  ME_LEFT = 'me-left',\n}\n\nexport type HuddleClientMethodName =\n  | 'muteMic'\n  | 'unmuteMic'\n  | 'enableWebcam'\n  | 'disableWebcam'\n  | 'enableShare'\n  | 'disableShare'\n  | 'startRecording'\n  | 'stopRecording'\n  | 'sendReaction'\n  | 'connectWallet'\n  | 'changeAvatarUrl'\n  | 'toggleRaiseHand';\n\nexport type HuddleClientInfoMethodName = 'getParticipants';\n\nexport type Reaction =\n  | ''\n  | '😂'\n  | '😢'\n  | '😦'\n  | '😍'\n  | '🤔'\n  | '👀'\n  | '🙌'\n  | '👍'\n  | '👎'\n  | '🔥'\n  | '🍻'\n  | '🚀'\n  | '🎉'\n  | '❤️'\n  | '💯';\n\nexport type HuddleClientMethods = {\n  [key in HuddleClientMethodName]: (data?: any) => void;\n};\n\nexport const triggerIframeEvent = (event: string, data: any) => {\n  window.parent.postMessage(\n    { type: 'room-event', eventData: { event, ...data } },\n    '*'\n  );\n};\n\nconst on = (eventName: HuddleAppEvent, callback: IframeEventCallback) =>\n  window.addEventListener(\n    'message',\n    event => {\n      if (event.data.type !== 'room-event') return;\n\n      if (event.data.eventData.event === eventName) {\n        callback(event.data.eventData);\n      }\n\n      // Do we trust the sender of this message?  (might be\n      // different from what we originally opened, for example).\n      if (event.origin !== 'http://example.com') return;\n    },\n    false\n  );\n\nconst callMethod = (\n  methodType: HuddleClientMethodName | HuddleClientInfoMethodName,\n  methodData?: any\n) => {\n  const huddleIframe: HTMLIFrameElement = document.getElementById(\n    'huddle01-iframe'\n  ) as HTMLIFrameElement;\n  if (huddleIframe?.contentWindow)\n    huddleIframe.contentWindow.postMessage(\n      { type: 'huddle01-iframe', methodType, methodData },\n      '*'\n    );\n  else console.log('huddleIframe is null');\n};\n\nconst methods: HuddleClientMethods = {\n  muteMic: () => {\n    callMethod('muteMic');\n  },\n  unmuteMic: () => {\n    callMethod('unmuteMic');\n  },\n  enableWebcam: () => {\n    callMethod('enableWebcam');\n  },\n  disableWebcam: () => {\n    callMethod('disableWebcam');\n  },\n  enableShare: () => {\n    callMethod('enableShare');\n  },\n  disableShare: () => {\n    callMethod('disableShare');\n  },\n  startRecording: () => {\n    callMethod('startRecording');\n  },\n  stopRecording: () => {\n    callMethod('stopRecording');\n  },\n  sendReaction: (reaction: Reaction) => {\n    callMethod('sendReaction', reaction);\n  },\n  connectWallet: address => {\n    callMethod('connectWallet', address);\n  },\n  toggleRaiseHand: () => {\n    callMethod('toggleRaiseHand');\n  },\n  changeAvatarUrl: (avatarUrl) => {\n    callMethod('changeAvatarUrl', avatarUrl);\n  },\n};\n\nexport type HuddleClientInfoMethods = {\n  [key in HuddleClientInfoMethodName]: (data?: any) => void;\n};\n\nconst infoMethods: HuddleClientInfoMethods = {\n  getParticipants: () => {\n    callMethod('getParticipants');\n  },\n};\n\nexport const huddleIframeApp = {\n  on,\n  methods,\n  infoMethods,\n};\n"],"names":["HuddleIframe","config","noBorder","roomUrl","height","width","React","id","src","style","border","name","scrolling","allowFullScreen","allow","HuddleAppEvent","triggerIframeEvent","event","data","window","parent","postMessage","type","eventData","on","eventName","callback","addEventListener","origin","callMethod","methodType","methodData","huddleIframe","document","getElementById","contentWindow","console","log","methods","muteMic","unmuteMic","enableWebcam","disableWebcam","enableShare","disableShare","startRecording","stopRecording","sendReaction","reaction","connectWallet","address","toggleRaiseHand","changeAvatarUrl","avatarUrl","infoMethods","getParticipants","huddleIframeApp"],"mappings":"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"}